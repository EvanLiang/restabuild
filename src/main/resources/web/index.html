<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="UTF-8">
    <title>Restabuild</title>
    <style>
        body {
            font-family: Arial,serif;
        }
        input[type=text] {
            display: block;
            width: 95%;
            margin: 10px 0;
        }
        input[type=submit] {
            padding: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
<h1>Restabuild</h1>
<p>The world's simplest build server</p>

<h2>Submit a build</h2>
<form id="createForm" action="/restabuild/api/v1/builds" method="post">
    <input type="hidden" name="responseType" value="html">
    <label>
        Git URL:
        <input type="text" id="gitUrlBox" name="gitUrl" required placeholder="https://github.com/3redronin/mu-server-sample.git">
    </label>
    <input type="submit" value="Run build">
</form>

<p>...or use curl:</p>
<div><code id="curlCommand">curl</code></div>

<h2>View builds</h2>

<p>Use the API at <a href="/restabuild/api/v1/builds">/restabuild/api/v1/builds</a></p>

</body>
<script>
    document.addEventListener('DOMContentLoaded', function () {
        var cc = document.getElementById('curlCommand');
        var form = document.getElementById('createForm');
        var urlBox = document.getElementById('gitUrlBox');
        var update = function () {
            var value = urlBox.value || 'URL-Encoded-Git-URL';
            cc.textContent = 'curl -X POST -d \'gitUrl=' + encodeURIComponent(value)
                + '\' -H \'Content-Type: application/x-www-form-urlencoded\' '
                + form.action;
        };
        urlBox.addEventListener('input', update);
        update();

    });
</script>
</html>